<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="google-site-verification" content="nbjYjxk3X-LYzr5IkNG2gTpM3pfo4eQnfHYJiBMZSQU" />

  <title>Settings Layout Test</title>

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
  <!-- Bootstrap Script (Requires JQuery) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>SHOW_TOUR=false;</script>
  <script src="nav.js"></script>
  <script>
    function submitSettings(){}
    function invite() {
        //document.getElementById('inviteCode').innerHTML = 'CODE';
        document.getElementById('inviteScreen').removeAttribute('hidden');
    }
    function closeInvite() {
      document.getElementById('inviteScreen').setAttribute('hidden','hidden');
      document.getElementById('copied').setAttribute('hidden','hidden');
    }
    function createInviteCard(username,roomCode) {
      let card = document.createElement('div');
      card.classList.add('invite-card');
      let cardRemoveTimeout = setTimeout(() => {document.body.removeChild(card)},10000);

      let nameElem = document.createElement('h3');
      nameElem.classList.add('invite-card-header');
      nameElem.innerHTML = 'New Invite From ' + username + '!';
      card.appendChild(nameElem);

      let joinButton = document.createElement('a');
      joinButton.classList.add('invite-card-button');
      joinButton.innerHTML = 'Join';
      joinButton.addEventListener('click', () => {joinFromInvite(roomCode)}, {once:true});
      card.appendChild(joinButton);

      let spacerSpan = document.createElement('span');
      spacerSpan.classList.add('invite-card-spacer');
      spacerSpan.innerHTML = '-';
      card.appendChild(spacerSpan);

      let ignoreButton = document.createElement('a');
      ignoreButton.classList.add('invite-card-button');
      ignoreButton.innerHTML = 'Ignore';
      ignoreButton.addEventListener('click', () => {document.body.removeChild(card); clearTimeout(cardRemoveTimeout)}, {once:true});
      card.appendChild(ignoreButton);

      document.body.appendChild(card);

    }
  </script>
</head>
<body>
<div w3-include-html="/nav.html"></div>

<div id="inviteScreen" class="container invite" hidden="hidden">
  <div class="row flex-nowrap">
    <div class="col-md-11 col-10">
      <h2>Invite</h2>
    </div>
    <div class="col-md col-2">
      <button onclick="closeInvite()" class="close">X</button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <p>Click the link below to copy it and end it to your friends:</p>
      <a href="https://machtarok.com/?join=CODE" class="share-link copy-text">machtarok.com/?join=CODE</a><span hidden="hidden" id="copied">  Copied!</span>
    </div>
    <div class="col-12">
      <br>
      <h3>Online Players:</h3>
      <table class="table">
        <thead>
        <tr>
          <th scope="col">Username</th>
          <th scope="col">Status</th>
          <th scope="col">Invite</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>Username</td>
          <td>Online</td>
          <td><button>Invite</button></td>
        </tr>
        <tr>
          <td>Username</td>
          <td>Idle</td>
          <td><button>Invite</button></td>
        </tr>
        <tr>
          <td>Username</td>
          <td>In Game</td>
          <td><button>Invite</button></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="container">

  <div class="row">
    <div class="col-6">
      <div class="d-flex justify-content-center">
        <button class="button btn red sticky-bottom" id="refresh" onclick="refresh()">&#10227; Refresh Rooms</button>
      </div>
    </div>
    <div class="col-6">
      <div class="d-flex justify-content-center">
        <button class="button btn red sticky-bottom" id="ping" onclick="ping()">&#10227; Ping Server</button>
      </div>
    </div>
  </div>


  <div id="outer">
    <div id="actionInfo" class="row">
      <div class="col-md"></div>
      <div class="col">
        <div id="timer"></div>
      </div>
      <div class="col">
        <div id="currentPlayer"></div>
      </div>
      <div class="col">
        <div id="currentAction"></div>
      </div>
      <div class="col-md"></div>
    </div>
    <div id="table" class="row" hidden>
      <div id="p1" class="col"><p hidden>Player 1</p></div>
      <div id="p2" class="col"><p hidden>Player 2</p></div>
      <div id="p3" class="col"><p hidden>Player 3</p></div>
      <div id="p4" class="col"><p hidden>Player 4</p></div>
      <p id="leader" hidden>Trick Leader</p>
    </div>
    <div id="center"></div>
    <hr>
    <div id="hand"></div>
    <div id="roundInfo" class="row">
      <!-- This will have money cards, povenost, prever, valat, contra, IOTE, etc. -->
    </div>

  </div>


  <br><br><br>


  <div id="rooms"></div>
  <div id="chatbox"><p></p></div>
  <div id="deck">
    <img hidden="hidden" src="/assets/mach-deck-thumb/card-back-t.png" id="cardBack" onload="cardBackLoaded=true">
  </div>
  <br><br>
  <div class="row centered footer" id="footer">
    <div class="col-xs-12 col-md-2">
      <p style="margin: 0;"><span id="online">1</span> Players Online</p>
    </div>
    <div class="col-xs-12 col-md-8 footer-content">
      <p class="footer-content">Open Source Code available on <a target="_blank" rel="noopener noreferrer" class="small-link" href="https://github.com/coder0987/Taroky">GitHub</a></p>
    </div>
    <div class="col-xs-12 col-md-2">
      <p style="margin: 0;"><span id="donate"><a class="small-link" href="donate.html">Donate</a></span> </p>
    </div>
  </div>
</div>

<script>
  includeHTML();
  $('.copy-text').click(function (e) {
      //First: try to share it
      if (navigator.share) {
        navigator.share(
          {title: 'Mach Tarok Invite',text: 'Let\'s Play Taroky!',url: 'machtarok.com/?join=CODE'}
        ).then(() => console.log('Successful share')
        ).catch(error => console.log('Error sharing:', error));
      } else {
         //Otherwise, copy the link
         e.preventDefault();
         let copyText = $(this).attr('href');

         document.addEventListener('copy', function(e) {
            e.clipboardData.setData('text/plain', copyText);
            e.preventDefault();
         }, true);

         document.execCommand('copy');
       }
       document.getElementById('copied').removeAttribute('hidden');
     });
</script>
</body>
</html>